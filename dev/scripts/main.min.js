let canvas=document.getElementById("gameCanvas"),ctx=canvas.getContext("2d"),ball=(canvas.width=.8*window.innerWidth,canvas.height=.8*window.innerHeight,{x:canvas.width/2,y:canvas.height/2,radius:10,color:"white",speed:5}),level=1,collected=0,keys={ArrowUp:!1,ArrowDown:!1,ArrowLeft:!1,ArrowRight:!1},enemies=[],collectibles=[];function createEnemiesAndCollectibles(){enemies.length=0,collectibles.length=0;var l=level+5,a=level;for(let e=0;e<l;e++)enemies.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,size:20,color:getRandomColor(),dx:4*(Math.random()-.5),dy:4*(Math.random()-.5)});for(let e=0;e<a;e++)collectibles.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,radius:10,color:getRandomColor()})}function getRandomColor(){var e=["#FF00FF","#00FFFF","#39FF14","#FF4500","#FF1493","#FFFF00","#00FF7F","#9400D3","#1E90FF","#FFD700","#FF69B4","#8A2BE2"];return e[Math.floor(Math.random()*e.length)]}function drawBall(){ctx.beginPath(),ctx.arc(ball.x,ball.y,ball.radius,0,2*Math.PI),ctx.fillStyle=ball.color,ctx.fill(),ctx.closePath()}function drawEnemies(){enemies.forEach(e=>{ctx.beginPath(),ctx.rect(e.x,e.y,e.size,e.size),ctx.fillStyle=e.color,ctx.fill(),ctx.closePath()})}function drawCollectibles(){collectibles.forEach(e=>{ctx.beginPath(),ctx.arc(e.x,e.y,e.radius,0,2*Math.PI),ctx.fillStyle=e.color,ctx.fill(),ctx.closePath()})}function clearCanvas(){ctx.clearRect(0,0,canvas.width,canvas.height)}function updateBallPosition(){keys.ArrowUp&&0<ball.y-ball.radius&&(ball.y-=ball.speed),keys.ArrowDown&&ball.y+ball.radius<canvas.height&&(ball.y+=ball.speed),keys.ArrowLeft&&0<ball.x-ball.radius&&(ball.x-=ball.speed),keys.ArrowRight&&ball.x+ball.radius<canvas.width&&(ball.x+=ball.speed)}function updateEnemies(){enemies.forEach(e=>{e.x+=e.dx,e.y+=e.dy,(e.x<=0||e.x+e.size>=canvas.width)&&(e.dx*=-1),(e.y<=0||e.y+e.size>=canvas.height)&&(e.dy*=-1)})}function checkCollisions(){enemies.forEach(e=>{var l=ball.x-(e.x+e.size/2),a=ball.y-(e.y+e.size/2);Math.sqrt(l*l+a*a)<ball.radius+e.size/2&&(alert("Você perdeu! Tente novamente."),resetGame())}),collectibles.forEach((e,l)=>{var a=ball.x-e.x,t=ball.y-e.y;Math.sqrt(a*a+t*t)<ball.radius+e.radius&&(collectibles.splice(l,1),++collected===level)&&(3<++level&&(alert("Você venceu o jogo!"),level=1),resetGame())})}function resetGame(){ball.x=canvas.width/2,ball.y=canvas.height/2,collected=0,createEnemiesAndCollectibles()}function gameLoop(){clearCanvas(),updateBallPosition(),updateEnemies(),checkCollisions(),drawBall(),drawEnemies(),drawCollectibles(),requestAnimationFrame(gameLoop)}window.addEventListener("keydown",e=>{keys.hasOwnProperty(e.key)&&(keys[e.key]=!0)}),window.addEventListener("keyup",e=>{keys.hasOwnProperty(e.key)&&(keys[e.key]=!1)}),createEnemiesAndCollectibles(),gameLoop();